<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert between bibliography formats — bibConvert • rbibutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert between bibliography formats — bibConvert"><meta name="description" content="

Read a bibliography file in one of the supported formats, convert it
  to another format, and write that to a file."><meta property="og:description" content="

Read a bibliography file in one of the supported formats, convert it
  to another format, and write that to a file."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rbibutils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GeoBosh/rbibutils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert between bibliography formats</h1>

      <div class="d-none name"><code>bibConvert.Rd</code></div>
    </div>

    <div class="ref-description section level2">


<p>Read a bibliography file in one of the supported formats, convert it
  to another format, and write that to a file.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bibConvert</span><span class="op">(</span><span class="va">infile</span>, <span class="va">outfile</span>, <span class="va">informat</span>, <span class="va">outformat</span>, <span class="va">...</span>, <span class="va">tex</span>, <span class="va">encoding</span>, </span>
<span>           <span class="va">options</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-infile">infile<a class="anchor" aria-label="anchor" href="#arg-infile"></a></dt>
<dd><p>input file, a character string.</p></dd>

  <dt id="arg-outfile">outfile<a class="anchor" aria-label="anchor" href="#arg-outfile"></a></dt>
<dd><p>output file, a character string.</p></dd>

  <dt id="arg-informat">informat<a class="anchor" aria-label="anchor" href="#arg-informat"></a></dt>
<dd><p>input format, a character string, see sections “Supported
    formats” and “Details”.</p></dd>

  <dt id="arg-outformat">outformat<a class="anchor" aria-label="anchor" href="#arg-outformat"></a></dt>
<dd><p>output format, a character string, see sections “Supported
    formats” and “Details”.</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>not used.</p></dd>

  <dt id="arg-tex">tex<a class="anchor" aria-label="anchor" href="#arg-tex"></a></dt>
<dd><p>TeX/LaTeX specific options, see section “Details”, a character
    vector.</p></dd>

  <dt id="arg-encoding">encoding<a class="anchor" aria-label="anchor" href="#arg-encoding"></a></dt>
<dd>

<p><code>character(2)</code>, a length two vector specifying input and output
    encodings. Default to both is <code>"utf8"</code>, see section
    “Details”.</p>
<p></p></dd>

  <dt id="arg-options">options<a class="anchor" aria-label="anchor" href="#arg-options"></a></dt>
<dd><p>mainly for debugging: additional options for the converters, see
    section “Details”.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p>Arguments <code>informat</code> and <code>outformat</code> can usually be omitted,
  since <code>bibConvert</code> infers them from the extensions of the names
  of the input and output files, see section "File extensions" below.
  However, there is ambiguity for the extension <code>"bib"</code>, since it
  is used for Bibtex and BibLaTeX entries. For this extension, the
  default for both, <code>informat</code> and <code>outformat</code>, is
  <code>"bibtex"</code>.</p>
<p>Package <span class="pkg">rbibutils</span> supports format <code>"bibentry"</code>, in addition
  to the formats supported by the bibutils library. A <code>bibentry</code>
  object contains one or more references.  Two formats are supported for
  <code>"bibentry"</code> for both input and output. A bibentry object
  previously saved to a file using <code>saveRDS</code> (default extension
  <code>"rds"</code>) or an R source file containing one or more
  <code>bibentry</code> commands. The <code>"rds"</code> file is just read in and
  should contain a <code>bibentry</code> object.</p>
<p>When <code>bibconvert</code> outputs to an R source file, two variants are
  supported: <code>"R"</code> and <code>"Rstyle"</code>.  When (<code>outformat =
  "R"</code>, there is one <code>bibentry</code> call for each reference, just as in
  a Bibtex file, each reference is a single entry.  <code>outformat =
  "Rstyle"</code> uses the format of <code>print(be, style = "R")</code>, i.e., the
  <code>bibentry</code> calls are output as a comma separated sequence wrapped
  in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>. For input, it is not necessary to specify which
  variant is used.</p>
<p><!-- % Such a file can be used as input to \code{bibConvert} (\code{informat -->
  <!-- % = "R"}). For input \code{bibConvert} accepts also R code containing -->
  <!-- % additional instructions. The input file is (effectively) -->
  <!-- % \code{source}'d, all bibentry objects created by it are collected and -->
  <!-- % merged into a single \code{bibentry} object. --></p>
<p>Note that when the input format and output formats are identical, the
  conversion is not necessarilly a null operation (except for
  <code>xml</code>, and even that may change). For example, depending on the
  arguments the character encoding may change. Also, input BibTeX files
  may contain additional instructions, such as journal abbreviations,
  which are expanded and incorporated in the references but not
  exported.  It should be remembered also that there may be loss of
  information when converting from one format to another.</p>
<p>For a complete list of supported bibliography formats, see section
  “Supported formats” below. The documentation of the original
  bibutils library (Putnam 2020) gives further details.</p>
<p>Argument <code>encoding</code> is a character vector containing 2 elements,
  specifying the encoding of the input and output files.  If the
  encodings are the same, a length one vector can be supplied. The
  default encodings are UTF-8 for input and output. A large number of
  familiar encodings are supported, e.g. <code>"latin1"</code> and
  <code>"cp1251"</code> (Windows Cyrillic). Some encodings have two or more
  aliases and they are also accepted. If an unknown encoding is
  requested, a list of all supported encodings will be printed.</p>
<p>Argument <code>tex</code> is an unnamed character vector containing switches
  for bibtex input and output (mostly output). Currently, the following
  are available:</p>
<p></p><dl><dt>uppercase</dt>
<dd><p>write bibtex tags/types in upper case.</p></dd>

    <dt>no_latex</dt>
<dd><p>do not convert latex-style character combinations to letters.</p></dd>

    <dt>brackets</dt>
<dd><p>use brackets, not quotation marks surrounding data.</p></dd>

    <dt>dash</dt>
<dd><p>use one dash <code>"-"</code>, not two <code>"--"</code>, in page ranges.</p></dd>

    <dt>fc</dt>
<dd><p>add final comma to bibtex output.</p></dd>


</dl><p>By default latex encodings for accented characters are converted to
  letters. This may be a problem if the output encoding is not UTF-8,
  since some characters created by this process may be invalid in that
  encoding. For example, a BibTeX file which otherwise contains only
  cyriilic and latin characters may have a few entries with authors
  containing latin accented characters represented using the TeX
  convention.  If those characters are not converted to Unicode letters,
  they can be exported to <code>"cp1251"</code> (Windows Cyrillic) for
  example. Specifying the option <code>no_latex</code> should solve the
  problem in such cases.</p>
<p>Argument <code>options</code> is mostly for debugging and mimics the command
  line options of the bibutils' binaries. The argument is a named
  character vector and is supplied as <code>c(tag1= val1, tag2 = val2,
  ...)</code>, where each tag is the name of an option and the value is the
  corresponding value. The value for options that do not require one is
  ignored and can be set to <code>""</code>. Some of the available options
  are:</p>
<p></p><dl><dt>h</dt>
<dd><p>help, show all available options.</p></dd>

    <dt>nb</dt>
<dd><p>do not write Byte Order Mark in UTF8 output.</p></dd>


    <dt>verbose</dt>
<dd><p>print intermediate output.</p></dd>

    <dt>debug</dt>
<dd><p>print even more intermediate output.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="supported-formats">Supported formats<a class="anchor" aria-label="anchor" href="#supported-formats"></a></h2>


<p>If an input or output format is not specified by arguments, it is
  inferred, if possible, from the file extension.</p>
<p>In the table below column Abbreviation shows the abbreviation for
  arguments <code>informat</code> and <code>outformat</code>, column FileExt gives
  the default file extension for that format, column Input (Output)
  contains TRUE if the format is supported for input (output) and FALSE
  otherwise. Column Description gives basic description of the format.</p>
<p><!-- % \tabular{ll}{% -->
  <!-- %   ads      \tab ADS reference format \cr -->
  <!-- %   bib      \tab BibTeX  \cr -->
  <!-- %   bibtex   \tab BibTeX  \cr -->
  <!-- %   biblatex \tab BibLaTeX  \cr -->
  <!-- %   copac    \tab COPAC format references   \cr -->
  <!-- %   ebi                                   \cr -->
  <!-- %   end      \tab EndNote (Refer format)  \cr  -->
  <!-- %   endx     \tab EndNote XML  \cr -->
  <!-- %   isi      \tab ISI web of science  \cr   -->
  <!-- %   med      \tab Pubmed XML references  \cr   -->
  <!-- %   nbib     \tab Pubmed/National Library of Medicine nbib format  \cr   -->
  <!-- %   ris      \tab RIS format  \cr -->
  <!-- %   R        \tab R source file containing \code{bibentry} commands  \cr -->
  <!-- %   r        \tab R source file containing \code{bibentry} commands  \cr -->
  <!-- %   Rstyle   \tab R source file containing \code{bibentry} commands  \cr -->
  <!-- %   rds      \tab bibentry object in a binary file created by \code{saveRDS()}   \cr -->
  <!-- %   xml      \tab MODS XML intermediate  \cr -->
  <!-- %   wordbib  \tab Word 2007 bibliography format   -->
  <!-- % } --></p>
<p></p><table class="table table"><tr><td><strong> Abbreviation </strong></td><td><strong> FileExt </strong></td><td><strong> Input </strong></td><td><strong> Output </strong></td><td><strong> Description </strong></td></tr><tr><td>ads</td><td>ads</td><td>FALSE</td><td>TRUE</td><td>ADS reference format</td></tr><tr><td>bib</td><td>bib</td><td>TRUE</td><td>TRUE</td><td>BibTeX</td></tr><tr><td>bibtex</td><td>bibtex</td><td>TRUE</td><td>TRUE</td><td>BibTeX</td></tr><tr><td>biblatex</td><td>biblatex</td><td>TRUE</td><td>TRUE</td><td>BibLaTeX</td></tr><tr><td>copac</td><td>copac</td><td>TRUE</td><td>FALSE</td><td>COPAC format references</td></tr><tr><td>ebi</td><td>ebi</td><td>TRUE</td><td>FALSE</td><td>EBI XML</td></tr><tr><td>end</td><td>end</td><td>TRUE</td><td>TRUE</td><td>EndNote (Refer format)</td></tr><tr><td>endx</td><td>endx</td><td>TRUE</td><td>FALSE</td><td>EndNote XML</td></tr><tr><td>isi</td><td>isi</td><td>TRUE</td><td>TRUE</td><td>ISI web of science</td></tr><tr><td>med</td><td>med</td><td>TRUE</td><td>FALSE</td><td>Pubmed XML references</td></tr><tr><td>nbib</td><td>nbib</td><td>TRUE</td><td>TRUE</td><td>Pubmed/National Library of Medicine nbib format</td></tr><tr><td>ris</td><td>ris</td><td>TRUE</td><td>TRUE</td><td>RIS format</td></tr><tr><td>R, r, Rstyle</td><td>R</td><td>TRUE</td><td>TRUE</td><td>R source file containing bibentry commands</td></tr><tr><td>rds</td><td>rds</td><td>TRUE</td><td>TRUE</td><td>bibentry object in a binary file created by saveRDS()</td></tr><tr><td>xml</td><td>xml</td><td>TRUE</td><td>TRUE</td><td>MODS XML intermediate</td></tr><tr><td>wordbib</td><td>wordbib</td><td>TRUE</td><td>TRUE</td><td>Word 2007 bibliography format</td></tr></table><p>The file <code>"easyPubMedvig.xml"</code> used in the examples for Pubmed
  XML (<code>"med"</code>) was obtained using code from the vignette in
  package <span class="pkg">easyPubMed</span> (Fantini 2019).</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function is used for the side effect of creating a file in the
  requested format. It returns a list, currently containing the
  following components:</p>
<p></p>
<dl><dt>infile</dt>
<dd><p>name of the input file,</p></dd>

  <dt>outfile</dt>
<dd><p>name of the output file,</p></dd>

  <dt>nref_in</dt>
<dd><p>number of references read from the input file,</p></dd>

  <dt>nref_out</dt>
<dd><p>number of references written to the output file.</p></dd>


  <dt>bib</dt>
<dd><p>when <code>outformat</code> is one of <code>"R"</code>, <code>"r"</code> or
    <code>"bibentry"</code>), a bibentry object obtained by reading
    <code>outfile</code>; otherwise not present.</p></dd>


</dl><p>Normally, <code>nref_in</code> and <code>nref_out</code> are the same.
  If some references were imported successfully but failed on export,
  <code>nref_out</code> may be smaller than <code>nref_in</code>. In such cases
  informative messages are printed during processing. (If this happens
  silently, it is probably a bug and please create an issue on Github.)</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Georgi N. Boshnakov</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><!-- % bibentry: Rpackage:easyPubMed -->
Damiano Fantini (2019).
“easyPubMed: Search and Retrieve Scientific Publication Records from PubMed.”
R package version 2.13, <a href="https://CRAN.R-project.org/package=easyPubMed" class="external-link">https://CRAN.R-project.org/package=easyPubMed</a>.
<!-- % end:bibentry:  Rpackage:easyPubMed --></p>
<p><!-- % bibentry: bibutils6.10 -->
Chris Putnam (2020).
“Library bibutils, version 6.10.”
<a href="https://sourceforge.net/projects/bibutils/" class="external-link">https://sourceforge.net/projects/bibutils/</a>.
<!-- % end:bibentry:  bibutils6.10 --></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="readBib.html">readBib</a></code>,</p>
<p><code><a href="readBib.html">charToBib</a></code>,</p>
<p><code><a href="readBibentry.html">readBibentry</a></code>, <code><a href="readBibentry.html">writeBibentry</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fn_biblatex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"bib"</span>, <span class="st">"ex0.biblatex"</span>,  package <span class="op">=</span> <span class="st">"rbibutils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn_biblatex</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/rbibutils/bib/ex0.biblatex"</span>
<span class="r-in"><span><span class="co">## file.show(fn_biblatex)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## convert a biblatex file to xml</span></span></span>
<span class="r-in"><span><span class="va">modl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".xml"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">bibConvert</span><span class="op">(</span>infile <span class="op">=</span> <span class="va">fn_biblatex</span>, outfile <span class="op">=</span> <span class="va">modl</span>, informat <span class="op">=</span> <span class="st">"biblatex"</span>, outformat <span class="op">=</span> <span class="st">"xml"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $infile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/rbibutils/bib/ex0.biblatex"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outfile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f52e6a7f7a.xml"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_in</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_out</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## file.show(modl)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## convert a biblatex file to bibtex</span></span></span>
<span class="r-in"><span><span class="va">bib</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".bib"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bib2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".bib"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">bibConvert</span><span class="op">(</span>infile <span class="op">=</span> <span class="va">fn_biblatex</span>, outfile <span class="op">=</span> <span class="va">bib</span>, informat <span class="op">=</span> <span class="st">"biblatex"</span>, outformat <span class="op">=</span> <span class="st">"bib"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $infile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/rbibutils/bib/ex0.biblatex"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outfile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f5216a23f45.bib"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_in</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_out</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## file.show(bib)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## convert a biblatex file to bibentry</span></span></span>
<span class="r-in"><span><span class="va">rds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".rds"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn_biblatex</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/rbibutils/bib/ex0.biblatex"</span>
<span class="r-in"><span><span class="va">rds</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f52376ea0c9.rds"</span>
<span class="r-in"><span><span class="va">be</span> <span class="op">&lt;-</span> <span class="fu">bibConvert</span><span class="op">(</span><span class="va">fn_biblatex</span>, <span class="va">rds</span>, <span class="st">"biblatex"</span>, <span class="st">"bibentry"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bea</span> <span class="op">&lt;-</span> <span class="fu">bibConvert</span><span class="op">(</span><span class="va">fn_biblatex</span>, <span class="va">rds</span>, <span class="st">"biblatex"</span><span class="op">)</span> <span class="co"># same</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">rds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Beach CM, Davidson R (1983). “Distribution-free statistical inference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> with Lorenz curves and income shares.” _Review of Economic Studies_,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *50*, 723-735.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Beach CM, Kaliski SF (1986). “Lorenz curve inference with sample</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> weights: an application to the distribution of unemployment</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> experience.” _Appl. Statist._, *35*, 38-45.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lambert PJ (1993). _The distribution and redistribution of income. A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mathematical analysis_, 2 edition. Manchester University Press,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Manchester.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## convert to R source file</span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">bibConvert</span><span class="op">(</span><span class="va">fn_biblatex</span>, <span class="va">r</span>, <span class="st">"biblatex"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $infile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/rbibutils/bib/ex0.biblatex"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outfile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f5251e4ddb1.R"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_in</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_out</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $bib</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Beach CM, Davidson R (1983). “Distribution-free statistical inference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> with Lorenz curves and income shares.” _Review of Economic Studies_,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *50*, 723-735.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Beach CM, Kaliski SF (1986). “Lorenz curve inference with sample</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> weights: an application to the distribution of unemployment</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> experience.” _Appl. Statist._, *35*, 38-45.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lambert PJ (1993). _The distribution and redistribution of income. A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mathematical analysis_, 2 edition. Manchester University Press,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Manchester.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## file.show(r)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bibentry(bibtype = "Article",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          key = "beachanddavidson1983",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          author = c(person(given = c("Charles", "M"),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            family = "Beach"),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     person(given = "Russell",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            family = "Davidson")),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          title = "Distribution-free statistical inference with Lorenz curves and income shares",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          journal = "Review of Economic Studies",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          year = "1983",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          month = "Feb",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          volume = "50",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          pages = "723--735")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bibentry(bibtype = "Article",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          key = "beachandkaliski1986a",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          author = c(person(given = c("C", "M"),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            family = "Beach"),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     person(given = c("S", "F"),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            family = "Kaliski")),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          title = "Lorenz curve inference with sample weights: an application to the distribution of unemployment experience",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          journal = "Appl. Statist.",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          year = "1986",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          volume = "35",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          pages = "38--45")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bibentry(bibtype = "Book",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          key = "lambert1993",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          author = person(given = c("Peter", "J"),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          family = "Lambert"),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          title = "The distribution and redistribution of income. A mathematical analysis",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          year = "1993",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          edition = "2",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          publisher = "Manchester University Press",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          address = "Manchester")</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fn_cyr_utf8</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"bib"</span>, <span class="st">"cyr_utf8.bib"</span>,  package <span class="op">=</span> <span class="st">"rbibutils"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Can't have files with different encodings in the package, so below</span></span></span>
<span class="r-in"><span><span class="co">## first convert a UTF-8 file to something else.</span></span></span>
<span class="r-in"><span><span class="co">##</span></span></span>
<span class="r-in"><span><span class="co">## input here contains cyrillic (UTF-8) output to Windows Cyrillic,</span></span></span>
<span class="r-in"><span><span class="co">## notice the "no_latex" option</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">bibConvert</span><span class="op">(</span><span class="va">fn_cyr_utf8</span>, <span class="va">bib</span>, encoding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"utf8"</span>, <span class="st">"cp1251"</span><span class="op">)</span>, tex <span class="op">=</span> <span class="st">"no_latex"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## now take the bib file and convert it to UTF-8</span></span></span>
<span class="r-in"><span><span class="fu">bibConvert</span><span class="op">(</span><span class="va">bib</span>, <span class="va">bib2</span>, encoding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cp1251"</span>, <span class="st">"utf8"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $infile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f5216a23f45.bib"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outfile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f522e7a64.bib"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_in</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_out</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co">## Latin-1 example: Author and Title fileds contain Latin-1 accented</span></span></span>
<span class="r-in"><span><span class="co">##   characters, not real names. As above, the file is in UTF-8</span></span></span>
<span class="r-in"><span><span class="va">fn_latin1_utf8</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"bib"</span>, <span class="st">"latin1accents_utf8.bib"</span>, package <span class="op">=</span> <span class="st">"rbibutils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## convert to Latin-1, by default the accents are converted to TeX combinations:</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">bibConvert</span><span class="op">(</span><span class="va">fn_latin1_utf8</span>, <span class="va">bib</span> , encoding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"utf8"</span>, <span class="st">"latin1"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">bib</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> @Article{test1,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> author="L{\^e}{\'a}{\'e}, K{\`a}r{\`e}",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> title="K{\`a}r{\`e} {\"u}{\"a} {\L}{\l}{\^e}{\'a}{\'e}",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> journal="Latin-1 accents",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year="2020",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> note="Having the similar title and author is helpful for debugging since authors are processed differently from other fields. Here is a formula: $\tan(\alpha)$, $\sin(\delta)/\delta \to 1$, $\sqrt{x}$."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## use "no_latex" option to keep them Latin1:</span></span></span>
<span class="r-in"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu">bibConvert</span><span class="op">(</span><span class="va">fn_latin1_utf8</span>, <span class="va">bib</span> , encoding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"utf8"</span>, <span class="st">"latin1"</span><span class="op">)</span>, tex <span class="op">=</span> <span class="st">"no_latex"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## this will show properly in Latin-1 locale (or suitable text editor):</span></span></span>
<span class="r-in"><span><span class="co">##cat(readLines(bib), sep = "\n")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## gb18030 example (Chinese)</span></span></span>
<span class="r-in"><span><span class="co">##</span></span></span>
<span class="r-in"><span><span class="co">## prepare some filenames for the examples below:</span></span></span>
<span class="r-in"><span><span class="va">xeCJK_utf8</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"bib/xeCJK_utf8.bib"</span>, package <span class="op">=</span> <span class="st">"rbibutils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xeCJK_gb18030</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"bib/xeCJK_gb18030.bib"</span>, package <span class="op">=</span> <span class="st">"rbibutils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn_gb18030</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".bib"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn_rds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".rds"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## input bib file utf8, output bib file gb18030:</span></span></span>
<span class="r-in"><span><span class="fu">bibConvert</span><span class="op">(</span><span class="va">xeCJK_utf8</span>, <span class="va">fn_gb18030</span>, encoding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"utf8"</span>, <span class="st">"gb18030"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $infile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/rbibutils/bib/xeCJK_utf8.bib"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outfile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f527ea3554e.bib"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_in</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_out</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## input bib file utf8, output file rds (and the rds object is returned</span></span></span>
<span class="r-in"><span><span class="fu">bibConvert</span><span class="op">(</span><span class="va">xeCJK_utf8</span>, <span class="va">fn_rds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $infile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/rbibutils/bib/xeCJK_utf8.bib"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outfile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f527cb3d5ce.rds"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_in</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_out</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $bib</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 陈骁, 黄声华, 万山明, 庞珽 (2012).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> “基于电无级变速器的内燃机最优控制策略及整车能量管理.” _电工技术学报_,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *27*(2), 133-138.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fn_gb18030</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fn_rds</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a Pubmed file</span></span></span>
<span class="r-in"><span><span class="va">fn_med</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"bib/easyPubMedvig.xml"</span>, package <span class="op">=</span> <span class="st">"rbibutils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## convert a Pubmed file to bibtex:</span></span></span>
<span class="r-in"><span><span class="fu">bibConvert</span><span class="op">(</span><span class="va">fn_med</span>, <span class="va">bib</span>, informat <span class="op">=</span> <span class="st">"med"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $infile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/rbibutils/bib/easyPubMedvig.xml"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outfile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpNcoh8e/file1f5216a23f45.bib"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_in</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nref_out</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## convert a Pubmed file to rds and import:</span></span></span>
<span class="r-in"><span><span class="co">#bibConvert(fn_med, rds, informat = "med")</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">modl</span>, <span class="va">bib</span>, <span class="va">bib2</span>, <span class="va">r</span>, <span class="va">rds</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Georgi N. Boshnakov, Chris Putman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

